depcheck:
  summary: run depcheck on every package
  command: |
    set -ueio pipefail
    for pkg in pkg/* tests/*; do (
      echo "Checking $pkg"
      cd "$pkg"
      npx depcheck --ignore-patterns=dist
    ); done

build-tests:
  summary: run the build steps on the tests
  command: |
    set -ueio pipefail
    root=$(pwd)
    for case in tests/*; do (
      echo "Testing $case"
      cd $case
      tsc -b .
      $root/pkg/cli/dist/cli.js generate
    ); done
